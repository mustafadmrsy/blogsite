<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senirkent Blog</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/index-specific.css">
    <link rel="stylesheet" href="../styles/categories.css">
    <link rel="stylesheet" href="../styles/darkmode.css">
    <link rel="stylesheet" href="../styles/blog-card.css">
    <link rel="stylesheet" href="../styles/popup.css">
    <link rel="stylesheet" href="../styles/category-custom.css">
    <link rel="stylesheet" href="../styles/login-form.css">
    <link rel="stylesheet" href="../styles/notification.css">
    <link rel="stylesheet" href="../styles/comment-system.css">
    <link rel="stylesheet" href="../styles/auth-forms.css">
    <link rel="stylesheet" href="../styles/userpage.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="snk-container">
        <!-- Header -->
        <header class="snk-header">
            <!-- Logo Alanı -->
            <div class="snk-header-logo">
                <img src="../public/images/logo.png" alt="Senirkent Blog" class="snk-logo-img">
                <h1 class="snk-site-title">Kategoriler</h1>
            </div>
            
            <!-- Arama Alanı -->
            <div class="snk-header-search">
                <div class="snk-search-icon">
                    <i class="fas fa-search"></i>
                </div>
                <input type="text" class="snk-search-input" placeholder="Blog'da ara...">
            </div>
            
            <!-- Butonlar ve Profil -->
            <div class="snk-header-actions">
                <!-- Profil Dropdown Menüsü -->
                <div class="snk-user-profile-dropdown">
                    <button id="profileDropdownBtn" class="snk-profile-dropdown-btn">
                        <i class="fas fa-user"></i> Profilim
                    </button>
                    <div id="profileDropdownMenu" class="snk-profile-dropdown-menu">
                        <div class="snk-profile-header">
                            <img src="../public/images/profile.png" alt="Profil" class="snk-menu-profile-img">
                            <div class="snk-profile-info">
                                <h4 class="snk-user-name">Mustafa Demirsoy</h4>
                                <p class="snk-user-handle">@mustafademirsoy</p>
                            </div>
                        </div>
                        <ul class="snk-profile-menu-list">
                            <li><a href="userpage.html"><i class="fas fa-user-circle"></i> Profili Görüntüle</a></li>
                            <li class="snk-toggle-item">
                                <span><i class="fas fa-moon"></i> Karanlık Mod</span>
                                <label class="snk-toggle-switch">
                                    <input type="checkbox" id="darkModeToggle" checked>
                                    <span class="snk-toggle-slider"></span>
                                </label>
                            </li>
                            <li class="snk-divider"></li>
                            <li><a href="#" class="snk-logout" id="snk_logout_btn" onclick="snk_profileDropdown_logout()"><i class="fas fa-sign-out-alt"></i> Çıkış Yap</a></li>
                            <li><a href="#"><i class="fas fa-cog"></i> Ayarlar</a></li>
                        </ul>
                    </div>
                </div>

                <button class="snk-header-btn snk-create-btn" id="snk_create_btn" onclick="setupCreateButton()">
                    <i class="fas fa-plus"></i>
                    Oluştur
                </button>
            </div>
        </header>

        <div class="snk-content-wrapper">
            <!-- Sidebar -->
            <div class="snk-sidebar">
                <!-- Sidebar Header ve Toggle Butonu -->
                <div class="snk-sidebar-header">
                    <h3 class="snk-sidebar-title">Menü</h3>
                    <!-- Sidebar Toggle Button -->
                    <button class="snk-sidebar-toggle" id="sidebarToggle">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                </div>
                
                <!-- Ana Navigasyon -->
                <div class="snk-sidebar-section">
                    <a href="index.html" class="snk-sidebar-item active">
                        <i class="fas fa-home"></i>
                        <span class="snk-sidebar-text">Ana Sayfa</span>
                    </a>
                    <a href="#" class="snk-sidebar-item" id="snk_sidebarPopular">
                        <i class="fas fa-fire"></i>
                        <span class="snk-sidebar-text">Popüler</span>
                    </a>
                    <a href="#" class="snk-sidebar-item">
                        <i class="fas fa-compass"></i>
                        <span class="snk-sidebar-text">Keşfet</span>
                    </a>
                    <a href="Categories.html" class="snk-sidebar-item">
                        <i class="fas fa-th-large"></i>
                        <span class="snk-sidebar-text">Kategoriler</span>
                    </a>
                </div>
                
                <!-- Özel Beslem1eler -->
                <div class="snk-sidebar-section">
                    <h3 class="snk-sidebar-heading">ÖZEL BESLEMELE</h3>
                    <a href="#" class="snk-sidebar-item">
                        <i class="fas fa-star"></i>
                        <span class="snk-sidebar-text">Favoriler</span>
                    </a>
                    <a href="#" class="snk-sidebar-item">
                        <i class="fas fa-history"></i>
                        <span class="snk-sidebar-text">Geçmiş</span>
                    </a>
                </div>
                
                <!-- Kategoriler -->
                <div class="snk-sidebar-section">
                    <h3 class="snk-sidebar-heading">KATEGORİLER</h3>
                    <a href="Categories.html?category=egitim" class="snk-sidebar-item">
                        <i class="fas fa-graduation-cap"></i>
                        <span class="snk-sidebar-text">Eğitim</span>
                    </a>
                    <a href="Categories.html?category=teknoloji" class="snk-sidebar-item">
                        <i class="fas fa-laptop-code"></i>
                        <span class="snk-sidebar-text">Teknoloji</span>
                    </a>
                    <a href="Categories.html?category=kultur" class="snk-sidebar-item">
                        <i class="fas fa-landmark"></i>
                        <span class="snk-sidebar-text">Kültür</span>
                    </a>
                    <a href="Categories.html?category=spor" class="snk-sidebar-item">
                        <i class="fas fa-futbol"></i>
                        <span class="snk-sidebar-text">Spor</span>
                    </a>
                </div>
                
                <!-- Kaynaklar -->
                <div class="snk-sidebar-section">
                    <h3 class="snk-sidebar-heading">KAYNAKLAR</h3>
                    <a href="hakkimizda.html" class="snk-sidebar-item">
                        <i class="fas fa-info-circle"></i>
                        <span class="snk-sidebar-text">Hakkımızda</span>
                    </a>
                    <a href="iletisim.html" class="snk-sidebar-item">
                        <i class="fas fa-envelope"></i>
                        <span class="snk-sidebar-text">İletişim</span>
                    </a>
                </div>
            </div>
            
            <!-- Ana İçerik -->
            <main class="snk-main-content snk-categories-main">
                <!-- Kategori Başlık ve Filtreler -->
                <div class="snk-categories-header">
                    <h1 class="snk-categories-title">Kategoriler</h1>
                    <div class="snk-categories-filters">
                        <button class="snk-category-filter active" data-filter="all">Tümü</button>
                        <button class="snk-category-filter" data-filter="egitim">Eğitim</button>
                        <button class="snk-category-filter" data-filter="teknoloji">Teknoloji</button>
                        <button class="snk-category-filter" data-filter="kultur">Kültür</button>
                        <button class="snk-category-filter" data-filter="spor">Spor</button>
                    </div>
                </div>
                
                <!-- Kategori Kartları Container -->
                <div class="snk-categories-container">
                    <!-- Eğitim Kategori Kartı -->
                    <div class="snk-category-card" data-category="egitim">
                        <div class="snk-category-card-header">
                            <i class="fas fa-graduation-cap snk-category-icon"></i>
                            <h2 class="snk-category-name">Eğitim</h2>
                        </div>
                        <div class="snk-category-content">
                            <p>Eğitim dünyasındaki gelişmeler, öğrenci hikayeleri ve akademik başarılar.</p>
                        </div>
                        <div class="snk-category-stats">
                            <span><i class="fas fa-file-alt"></i> 24 Yazı</span>
                            <span><i class="fas fa-eye"></i> 1.2K Görüntülenme</span>
                        </div>
                        <a href="Categories.html?category=egitim" class="snk-category-btn">Yazıları Gör</a>
                    </div>
                    
                    <!-- Teknoloji Kategori Kartı -->
                    <div class="snk-category-card" data-category="teknoloji">
                        <div class="snk-category-card-header">
                            <i class="fas fa-laptop-code snk-category-icon"></i>
                            <h2 class="snk-category-name">Teknoloji</h2>
                        </div>
                        <div class="snk-category-content">
                            <p>Teknoloji haberleri, yeni ürünler ve dijital dünya gelişmeleri.</p>
                        </div>
                        <div class="snk-category-stats">
                            <span><i class="fas fa-file-alt"></i> 18 Yazı</span>
                            <span><i class="fas fa-eye"></i> 2.3K Görüntülenme</span>
                        </div>
                        <a href="Categories.html?category=teknoloji" class="snk-category-btn">Yazıları Gör</a>
                    </div>
                    
                    <!-- Kültür Kategori Kartı -->
                    <div class="snk-category-card" data-category="kultur">
                        <div class="snk-category-card-header">
                            <i class="fas fa-landmark snk-category-icon"></i>
                            <h2 class="snk-category-name">Kültür</h2>
                        </div>
                        <div class="snk-category-content">
                            <p>Sanat etkinlikleri, kültürel değerler ve geleneksel yaşam.</p>
                        </div>
                        <div class="snk-category-stats">
                            <span><i class="fas fa-file-alt"></i> 12 Yazı</span>
                            <span><i class="fas fa-eye"></i> 950 Görüntülenme</span>
                        </div>
                        <a href="Categories.html?category=kultur" class="snk-category-btn">Yazıları Gör</a>
                    </div>
                    
                    <!-- Spor Kategori Kartı -->
                    <div class="snk-category-card" data-category="spor">
                        <div class="snk-category-card-header">
                            <i class="fas fa-futbol snk-category-icon"></i>
                            <h2 class="snk-category-name">Spor</h2>
                        </div>
                        <div class="snk-category-content">
                            <p>Spor müsabakaları, takım haberleri ve sporcu hikayeleri.</p>
                        </div>
                        <div class="snk-category-stats">
                            <span><i class="fas fa-file-alt"></i> 16 Yazı</span>
                            <span><i class="fas fa-eye"></i> 1.8K Görüntülenme</span>
                        </div>
                        <a href="Categories.html?category=spor" class="snk-category-btn">Yazıları Gör</a>
                    </div>
                </div>
                
                <!-- Son Yazılar Bölümü -->
                <div class="snk-categories-recent">
                    <h2 class="snk-recent-title">Son Eklenen Yazılar</h2>
                    <div class="snk-recent-posts" id="snk_postsContainer">
                        <!-- Yazı 1 -->
                        <div class="snk-recent-post-card">
                            <div class="snk-recent-post-image">
                                <img src="../public/images/placeholder.jpg" alt="Yazı Görseli">
                                <span class="snk-post-category" data-category="egitim">Eğitim</span>
                            </div>
                            <div class="snk-recent-post-content">
                                <h3 class="snk-recent-post-title">Üniversitelerde Dijital Dönüşüm Süreci</h3>
                                <p class="snk-recent-post-excerpt">Üniversiteler dijital dönüşüm sürecinde yeni teknolojileri nasıl kullanıyor?</p>
                                <div class="snk-recent-post-meta">
                                    <span><i class="fas fa-calendar"></i> 12 Şubat 2025</span>
                                    <span><i class="fas fa-user"></i> Ahmet Yılmaz</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Yazı 2 -->
                        <div class="snk-recent-post-card">
                            <div class="snk-recent-post-image">
                                <img src="../public/images/placeholder.jpg" alt="Yazı Görseli">
                                <span class="snk-post-category" data-category="teknoloji">Teknoloji</span>
                            </div>
                            <div class="snk-recent-post-content">
                                <h3 class="snk-recent-post-title">Yapay Zeka ve Günlük Yaşamımız</h3>
                                <p class="snk-recent-post-excerpt">Yapay zeka teknolojileri günlük yaşamımızı nasıl etkiliyor ve dönüştürüyor?</p>
                                <div class="snk-recent-post-meta">
                                    <span><i class="fas fa-calendar"></i> 8 Şubat 2025</span>
                                    <span><i class="fas fa-user"></i> Zeynep Kaya</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Yazı 3 -->
                        <div class="snk-recent-post-card">
                            <div class="snk-recent-post-image">
                                <img src="../public/images/placeholder.jpg" alt="Yazı Görseli">
                                <span class="snk-post-category" data-category="kultur">Kültür</span>
                            </div>
                            <div class="snk-recent-post-content">
                                <h3 class="snk-recent-post-title">Geleneksel Sanatlarımızın Modern Yorumları</h3>
                                <p class="snk-recent-post-excerpt">Genç sanatçılar geleneksel sanatlarımızı modern yorumlarla nasıl yaşatıyor?</p>
                                <div class="snk-recent-post-meta">
                                    <span><i class="fas fa-calendar"></i> 5 Şubat 2025</span>
                                    <span><i class="fas fa-user"></i> Mehmet Demir</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Popup Container -->
    <div class="snk-popup-overlay" id="snk_popupOverlay">
        <div class="snk-popup-container">
            <div class="snk-popup-header">
                <h2 class="snk-popup-title" id="snk_popupTitle"></h2>
                <button class="snk-popup-close-btn" id="snk_popupCloseBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="snk-popup-content" id="snk_popupContent">
                <!-- Popup içeriği JavaScript ile yüklenir -->
            </div>
        </div>
    </div>

    <!-- Mobil Menü Butonu -->
    <button class="snk-mobile-menu-btn" id="mobileSidebarToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Blog Oluşturma Popup HTML Yapısı -->
    <div class="snk-blog-create-container" id="snk_blogCreateContainer" style="display: none;">
        <!-- Bu container dinamik olarak doldurulacak -->
    </div>

    <!-- JavaScript dosyaları -->
    <script src="../components/dom-utils.js"></script>
    <script src="../components/sidebar.js"></script>
    <script src="../components/popup.js"></script>
    <script src="../components/popup-handler.js"></script>
    <script src="../components/profile-dropdown.js"></script>
    <script src="../components/login-handler.js"></script>
    <script src="../components/categories.js"></script>
    <script src="../components/main.js"></script>
    <script src="../components/comment-system.js"></script>
    <script src="../darkjs/darkmode.js"></script>
    
    <!-- Sayfa özel scriptleri -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Kategoriler sayfası özel scriptleri yükleniyor...');
            
            // Çıkış Yap butonunu ayarla
            const logoutBtn = document.querySelector('.snk-logout');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Çıkış yapılıyor...');
                    
                    // LocalStorage'dan kullanıcı verilerini temizle
                    localStorage.removeItem('snk_currentUser');
                    localStorage.removeItem('snk_userToken');
                    localStorage.removeItem('snk_authExpires');
                    
                    // Profil dropdown menüsünü kapat
                    const profileDropdownMenu = document.getElementById('profileDropdownMenu');
                    if (profileDropdownMenu) {
                        profileDropdownMenu.classList.remove('active');
                    }
                    
                    alert('Başarıyla çıkış yapıldı.');
                    
                    // Ana sayfaya yönlendir
                    window.location.href = '../pages/index.html';
                });
                console.log('Çıkış butonu olayı tanımlandı');
            }
            
            // Oluştur butonunu ayarla
            const createBtn = document.getElementById('snk_create_btn');
            if (createBtn) {
                createBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Oluştur butonuna tıklandı');
                    
                    // LocalStorage'dan kullanıcı bilgisini kontrol et
                    const currentUser = JSON.parse(localStorage.getItem('snk_currentUser') || '{}');
                    
                    if (currentUser && currentUser.username) {
                        // Kullanıcı giriş yapmış, blog oluşturma modalını göster
                        createBlogPost(currentUser);
                    } else {
                        // Kullanıcı giriş yapmamış, login modalını göster
                        alert('Blog yazısı oluşturmak için giriş yapmalısınız!');
                        // Giriş sayfasına yönlendir
                        window.location.href = '../pages/index.html';
                    }
                });
                console.log('Oluştur butonu olayı tanımlandı');
            } else {
                console.error('Oluştur butonu bulunamadı!');
            }
            
            // Blog yazısı oluşturma popup'ını göster
            function createBlogPost(user) {
                console.log("Blog yazısı oluşturma popup'ı açılıyor...");
                
                // Tüm popup'ları temizle
                const existingPopups = document.querySelectorAll('.snk-popup-overlay');
                existingPopups.forEach(popup => {
                    popup.remove();
                });
                
                // Blog oluşturma popup HTML'ini oluştur
                const popupHTML = `
                <div class="snk-popup-overlay active" id="blogCreatePopup">
                    <div class="snk-popup-container">
                        <div class="snk-popup-header">
                            <h2 class="snk-popup-title">Yeni Blog Yazısı</h2>
                            <button class="snk-popup-close-btn" id="blogCreateCloseBtn">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="snk-popup-content">
                            <form class="snk-create-post-form">
                                <div class="snk-form-group">
                                    <label for="post-title">Başlık</label>
                                    <input type="text" id="post-title" class="snk-form-control" placeholder="Blog yazınızın başlığını girin" required>
                                </div>
                                
                                <div class="snk-form-group">
                                    <label for="post-category">Kategori</label>
                                    <select id="post-category" class="snk-form-control" required>
                                        <option value="" disabled selected>Kategori seçin</option>
                                        <option value="teknoloji">Teknoloji</option>
                                        <option value="egitim">Eğitim</option>
                                        <option value="yasam">Yaşam</option>
                                        <option value="seyahat">Seyahat</option>
                                        <option value="spor">Spor</option>
                                        <option value="kultur">Kültür & Sanat</option>
                                        <option value="bilim">Bilim</option>
                                    </select>
                                </div>
                                
                                <div class="snk-form-group">
                                    <label for="post-image">Kapak Görseli</label>
                                    <input type="file" id="post-image" class="snk-form-control" accept="image/*">
                                    <small class="snk-form-text">Önerilen: 1200x630 piksel</small>
                                </div>
                                
                                <div class="snk-form-group">
                                    <label for="post-content">İçerik</label>
                                    <textarea id="post-content" class="snk-form-control" rows="10" placeholder="Blog yazınızın içeriğini buraya girin..." required></textarea>
                                </div>
                                
                                <div class="snk-form-group">
                                    <label for="post-tags">Etiketler</label>
                                    <input type="text" id="post-tags" class="snk-form-control" placeholder="Etiketleri virgülle ayırarak girin (örn: yazılım, web, teknoloji)">
                                </div>
                                
                                <div class="snk-form-actions">
                                    <button type="button" class="snk-btn snk-btn-secondary" id="post-cancel">İptal Et</button>
                                    <button type="button" class="snk-btn snk-btn-primary" id="post-submit">Yayınla</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>`;
                
                // HTML'i body'e ekle
                document.body.insertAdjacentHTML('beforeend', popupHTML);
                
                // Popup kapatma olay dinleyicisi
                const closeBtn = document.getElementById('blogCreateCloseBtn');
                if (closeBtn) {
                    closeBtn.addEventListener('click', function() {
                        const popup = document.getElementById('blogCreatePopup');
                        if (popup) {
                            popup.remove();
                        }
                    });
                }
                
                // İptal butonu olay dinleyicisi
                const cancelBtn = document.getElementById('post-cancel');
                if (cancelBtn) {
                    cancelBtn.addEventListener('click', function() {
                        const popup = document.getElementById('blogCreatePopup');
                        if (popup) {
                            popup.remove();
                        }
                    });
                }
                
                // Form gönderme olay dinleyicisi
                const submitBtn = document.getElementById('post-submit');
                if (submitBtn) {
                    submitBtn.addEventListener('click', function() {
                        // Form verilerini al
                        const title = document.getElementById('post-title').value;
                        const category = document.getElementById('post-category').value;
                        const content = document.getElementById('post-content').value;
                        const tags = document.getElementById('post-tags').value;
                        
                        // Basit doğrulama
                        if (!title || !category || !content) {
                            alert('Lütfen gerekli alanları doldurun (Başlık, Kategori, İçerik)');
                            return;
                        }
                        
                        alert('Blog yazınız başarıyla oluşturuldu!');
                        
                        // Popup'ı kapat
                        const popup = document.getElementById('blogCreatePopup');
                        if (popup) {
                            popup.remove();
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>
